---
# L3LS Fabric Values - update these values with caution,
# SOME CHANGES COULD BE DISRUPTIVE.
custom_structured_configuration_prefix: ['my_dci_']

fabric_name: ATD_FABRIC

# Enable vlan aware bundles

# bgp peer groups passwords
bgp_peer_groups:
  IPv4_UNDERLAY_PEERS:
    password: "AQQvKeimxJu+uGQ/yYvv9w=="
  EVPN_OVERLAY_PEERS:
    password: "q+VNViP5i4rVjW1cxFv2wA=="
  MLAG_IPv4_UNDERLAY_PEER:
    password: "vnEaG8gMeQf3d3cN6PktXQ=="

# Spine Switches
spine:
  defaults:
    platform: cEOS-LAB
    bgp_as: 65000
    loopback_ipv4_pool: 192.168.101.0/24
    bgp_defaults:
      - 'no bgp default ipv4-unicast'
      - 'distance bgp 20 200 200'
      - 'graceful-restart restart-time 300'
      - 'graceful-restart'
    mlag: false
  nodes:
    spine1-DC1:
      id: 111
      mgmt_ip: 192.168.0.11/24
      bgp_as: 65100
    spine2-DC1:
      id: 112
      mgmt_ip: 192.168.0.12/24
      bgp_as: 65100
    spine3-DC1:
      id: 113
      mgmt_ip: 192.168.0.13/24
      bgp_as: 65100
    spine1-DC2:
      id: 114
      mgmt_ip: 192.168.0.14/24
      bgp_as: 65200
    spine2-DC2:
      id: 115
      mgmt_ip: 192.168.0.15/24
      bgp_as: 65200
    spine3-DC2:
      id: 116
      mgmt_ip: 192.168.0.16/24
      bgp_as: 65200
# Leaf switch groups
# A maximum of two nodes can form a leaf group
# When two nodes are in a leaf group this will automatically form mlag pair

l3leaf:
  defaults:
    platform: cEOS-LAB
    loopback_ipv4_pool: 192.168.101.0/24
    loopback_ipv4_offset: 0
    vtep_loopback_ipv4_pool: 192.168.102.0/24
    uplink_interfaces: [Ethernet3, Ethernet4, Ethernet5, Ethernet6, Ethernet7]
    uplink_switches: [spine1-DC1, spine2-DC1, spine3-DC1]
    uplink_ipv4_pool: 192.168.103.0/24
    mlag_interfaces: [Ethernet1, Ethernet2]
    mlag_peer_ipv4_pool: 10.255.252.0/24
    mlag_peer_l3_ipv4_pool: 10.255.251.0/24
    virtual_router_mac_address: 00:1c:73:00:00:99
    bgp_defaults:
      - 'no bgp default ipv4-unicast'
      - 'distance bgp 20 200 200'
      - 'graceful-restart restart-time 300'
      - 'graceful-restart'
    spanning_tree_mode: mstp
    spanning_tree_priority: 16384
  node_groups:
    pod1:
      bgp_as: 65101
      nodes:
        leaf1-DC1:
          id: 1
          mgmt_ip: 192.168.0.21/24
          uplink_switch_interfaces: [Ethernet2, Ethernet2, Ethernet2]
          uplink_switches: [spine1-DC1, spine2-DC1, spine3-DC1]

        leaf2-DC1:
          id: 2
          mgmt_ip: 192.168.0.22/24
          uplink_switch_interfaces: [Ethernet3, Ethernet3, Ethernet3]
          uplink_switches: [spine1-DC1, spine2-DC1, spine3-DC1]

    pod2:
      bgp_as: 65102
      nodes:
        leaf3-DC1:
          id: 3
          mgmt_ip: 192.168.0.23/24
          uplink_switch_interfaces: [Ethernet4, Ethernet4, Ethernet4]
          uplink_switches: [spine1-DC1, spine2-DC1, spine3-DC1]

        leaf4-DC1:
          id: 4
          mgmt_ip: 192.168.0.24/24
          uplink_switch_interfaces: [Ethernet5, Ethernet5, Ethernet5]
          uplink_switches: [spine1-DC1, spine2-DC1, spine3-DC1]
    pod3:
      bgp_as: 65103
      nodes:
        borderleaf1-DC1:
          id: 5
          mgmt_ip: 192.168.0.25/24
          uplink_switch_interfaces: [Ethernet6, Ethernet6, Ethernet6]
          uplink_switches: [spine1-DC1, spine2-DC1, spine3-DC1]
        borderleaf2-DC1:
          id: 6
          mgmt_ip: 192.168.0.26/24
          uplink_switches: [spine1-DC1, spine2-DC1, spine3-DC1]
          uplink_switch_interfaces: [Ethernet7, Ethernet7, Ethernet7]
    pod4:
      bgp_as: 65201
      nodes:
        leaf1-DC2:
          id: 7
          mgmt_ip: 192.168.0.31/24
          uplink_switches: [spine1-DC2, spine2-DC2, spine3-DC2]
          uplink_switch_interfaces: [Ethernet2, Ethernet2, Ethernet2]
        leaf2-DC2:
          id: 8
          mgmt_ip: 192.168.0.32/24
          uplink_switches: [spine1-DC2, spine2-DC2, spine3-DC2]
          uplink_switch_interfaces: [Ethernet3, Ethernet3, Ethernet3]
    pod5:
      bgp_as: 65202
      nodes:
        leaf3-DC2:
          id: 9
          mgmt_ip: 192.168.0.33/24
          uplink_switches: [spine1-DC2, spine2-DC2, spine3-DC2]
          uplink_switch_interfaces: [Ethernet4, Ethernet4, Ethernet4]
        leaf4-DC2:
          id: 10
          mgmt_ip: 192.168.0.34/24
          uplink_switches: [spine1-DC2, spine2-DC2, spine3-DC2]
          uplink_switch_interfaces: [Ethernet5, Ethernet5, Ethernet5]
    pod6:
      bgp_as: 65203
      nodes:
        borderleaf1-DC2:
          id: 11
          mgmt_ip: 192.168.0.35/24
          uplink_switches: [spine1-DC2, spine2-DC2, spine3-DC2]
          uplink_switch_interfaces: [Ethernet6, Ethernet6, Ethernet6]
        borderleaf2-DC2:
          id: 12
          mgmt_ip: 192.168.0.36/24
          uplink_switches: [spine1-DC2, spine2-DC2, spine3-DC2]
          uplink_switch_interfaces: [Ethernet7, Ethernet7, Ethernet7]
#### Override for vEOS Lab Caveats ####

# Disable update wait-for-convergence and update wait-for-install,
# which is not supported in vEOS-LAB.
# Refer to design guide

# Update p2p mtu 9000 -> 1500
p2p_uplinks_mtu: 9214

# Adjust default bfd values
bfd_multihop:
  interval: 1200
  min_rx: 1200
  multiplier: 3

# List of additional CVP configlets to bind to devices and containers
# Configlets MUST be configured on CVP before running AVD playbooks.

# cv_configlets:
#   containers:
#     DC1_L3LEAFS:
#       - ASE_GLOBAL-ALIASES

cv_configlets:
  devices:
    borderleaf1-DC1:
      - DCI_borderleaf1-DC1
    borderleaf2-DC1:
      - DCI_borderleaf2-DC1
    borderleaf1-DC2:
      - DCI_borderleaf1-DC2
    borderleaf2-DC2:
      - DCI_borderleaf2-DC2
    DCI:
      - AVD_DCI_Switch
    


ansible_connection: httpapi
ansible_network_os: eos
ansible_become: true
ansible_become_method: enable
ansible_httpapi_use_ssl: true
ansible_httpapi_validate_certs: false


local_users:
  ansible_local:
    privilege: 15
    role: network-admin
    sha512_password: "$6$Dzu11L7yp9j3nCM9$FSptxMPyIL555OMO.ldnjDXgwZmrfMYwHSr0uznE5Qoqvd9a6UdjiFcJUhGLtvXVZR1r.A/iF5aAt50hf/EK4/"

# Cloud Vision server information
cvp_instance_ip: 192.168.0.5
cvp_ingestauth_key: 'atd-lab'

# OOB Management network default gateway.
mgmt_gateway: 192.168.0.1
# If ATD is running cEOS, management interface is Management0
# If ATD is running vEOS, management interface is Management1
mgmt_interface: Management0
mgmt_interface_vrf: default

# dns servers.
name_servers:
  - 192.168.2.1
  - 8.8.8.8

# dns domain
dns_domain: atd.lab

# NTP Servers IP or DNS name, first NTP server will be prefered, and sourced from Managment VRF
# ntp_servers:
#  - 192.168.0.1

radius_servers:
  - host: 192.168.0.1
    # vrf: default
    key: 0207165218120E

aaa_server_groups:
  - name: atds
    type: radius
    servers:
      - server: 192.168.0.1
        # vrf: default

